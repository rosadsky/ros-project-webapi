# Go API Server for hospital_spaces

Hospital Space Management for Web-In-Cloud system

## Overview
This server was generated by the [openapi-generator](https://openapi-generator.tech) project and follows the same patterns as the ambulance-webapi.

The API provides simple CRUD operations for managing hospital spaces:

- **CREATE** - Create new hospital spaces
- **READ** - List all available spaces  
- **UPDATE** - Assign ambulances or departments to spaces
- **DELETE** - Remove spaces from the system

## Features

- MongoDB database integration
- RESTful API endpoints
- Proper error handling
- Graceful server shutdown
- Health check endpoint
- Audit trail with timestamps

## API Endpoints

### Space Management
- `POST /api/spaces` - Create a new space
- `GET /api/spaces` - List all spaces
- `PUT /api/spaces/{id}` - Update space assignment
- `DELETE /api/spaces/{id}` - Delete a space

### Ambulance Support  
- `POST /api/ambulances` - Create an ambulance (for assignments)
- `GET /api/ambulances` - List ambulances (for assignments)

### Health Check
- `GET /api/health` - Health check endpoint

## Environment Variables

- `AMBULANCE_API_MONGODB_URI` - MongoDB connection string (default: mongodb://localhost:27017)
- `AMBULANCE_API_MONGODB_DATABASE` - Database name (default: hospital-spaces)  
- `AMBULANCE_API_PORT` - Server port (default: 8080)

## Data Models

### Space
- ID (MongoDB ObjectID)
- SpaceID (UUID)
- Name (string)
- Type (string) - e.g., "operating_room", "ward", "emergency_room"
- Floor (int)
- Capacity (int)
- Status (string) - "available", "occupied", "maintenance"
- AssignedTo (optional string) - Name of assigned entity
- AssignedType (optional string) - "ambulance" or "department"
- AssignedID (optional UUID) - Reference to assigned entity
- CreatedAt/UpdatedAt (timestamps)

### Ambulance
- ID (MongoDB ObjectID) 
- AmbulanceID (UUID)
- Name (string)
- Type (string)
- Location (string)
- Status (string) - "available", "busy", "maintenance"
- CreatedAt/UpdatedAt (timestamps)

## Running the Server

```bash
# Set environment (optional - has defaults)
export AMBULANCE_API_MONGODB_URI="mongodb://localhost:27017"
export AMBULANCE_API_MONGODB_DATABASE="hospital-spaces"
export AMBULANCE_API_PORT="8080"

# Install dependencies and run
go mod tidy
go run cmd/api/main.go
```

## Database Collections

- `spaces` - Hospital spaces collection
- `ambulances` - Ambulances collection

The server automatically creates necessary indexes on startup. 